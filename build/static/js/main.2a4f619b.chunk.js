(this["webpackJsonpesper-console"]=this["webpackJsonpesper-console"]||[]).push([[0],{21:function(e,t,n){e.exports=n.p+"static/media/esper-logo.0e2fe143.svg"},30:function(e,t,n){e.exports=n(47)},40:function(e,t,n){},41:function(e,t,n){},43:function(e,t,n){},44:function(e,t,n){},45:function(e,t,n){},46:function(e,t,n){},47:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(16),o=n.n(c),s=n(18),i=n(12),u=n(14),l=n(2),p=n(3),m=n(4),h=n(6),d=n(5),b=n(13),f=n.n(b),v=n(20),E=(n(40),function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(m.a)(n,[{key:"render",value:function(){var e=this.props.children;return(r.a.createElement("div",{className:"card"},e))}}]),n}(a.PureComponent)),g=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(e){var a;Object(p.a)(this,n),a=t.call(this,e);var r="Cannot create AbstractPage instances directly",c="Must override method";if(a.constructor.name===n)throw new TypeError(r);return["_constructURL","_getChildren"].forEach((function(e){if("function"!==typeof a._constructURL)throw new TypeError("".concat(c," _constructURL"))})),a.state={data:null,errorMessage:null},a}return Object(m.a)(n,[{key:"componentDidMount",value:function(){this._loadData()}},{key:"render",value:function(){var e=this,t=this.state.data;return t?t.length>0?t.map((function(t,n){return r.a.createElement(E,{key:n},e._getChildren(t))})):r.a.createElement("p",null,"Data not availble."):r.a.createElement("p",null,"Loading data..")}},{key:"_loadData",value:function(){var e=Object(v.a)(f.a.mark((function e(){var t,n,a,r,c,o,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.data.token,n=this._constructURL(),e.next=4,fetch(n,{headers:{Authorization:"Token ".concat(t),"Content-Type":"application/json"},method:"GET"});case 4:return a=e.sent,e.next=7,a.json();case 7:r=e.sent,c=r.errors,o=r.results,s=r.message,this.setState({data:o||[],errorMessage:c&&s});case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(a.Component),j="https://trqul-api.esper.cloud",O=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(m.a)(n,[{key:"_constructURL",value:function(){var e=this.props.data.enterprise;return"".concat(j,"/api/enterprise/").concat(e,"/devicegroup/")}},{key:"_getChildren",value:function(e){return r.a.createElement(a.Fragment,null,r.a.createElement("h3",null,e.name),r.a.createElement("p",null,"Device count - ".concat(e.device_count)))}}]),n}(g),y=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(m.a)(n,[{key:"_constructURL",value:function(){var e=this.props.data.enterprise;return"".concat(j,"/api/enterprise/").concat(e,"/device/")}},{key:"_getChildren",value:function(e){return r.a.createElement(a.Fragment,null,r.a.createElement("h3",null,e.device_name),r.a.createElement("p",null))}}]),n}(g),k=(n(41),function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(m.a)(n,[{key:"render",value:function(){var e=this,t=this.props.match.path;return this.props.data.token?r.a.createElement(u.a,{basename:t},r.a.createElement("div",{className:"dashboard"},r.a.createElement("div",{className:"sidebar"},r.a.createElement("h2",null,"User's dashboard"),r.a.createElement("hr",null),r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(u.b,{to:"/devices"},"Devices")),r.a.createElement("li",null,r.a.createElement(u.b,{to:"/groups"},"Groups")))),r.a.createElement("div",{className:"content"},r.a.createElement("div",{className:"content-container"},r.a.createElement(l.d,null,r.a.createElement(l.b,{path:"/devices",render:function(){return r.a.createElement(y,e.props)}}),r.a.createElement(l.b,{path:"/groups",render:function(){return r.a.createElement(O,e.props)}})))))):r.a.createElement(l.a,{to:"/login"})}}]),n}(a.Component)),_=Object(i.b)((function(e){return{data:e}}))(k),w=n(21),C=n.n(w),N=(n(43),function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(m.a)(n,[{key:"render",value:function(){var e=this;return(r.a.createElement("div",{className:"home"},r.a.createElement("div",{className:"home-detail"},r.a.createElement("img",{src:C.a,alt:"esper-logo"}),r.a.createElement("div",null,r.a.createElement("h2",null,"Welcome to Esper.io"),r.a.createElement("button",{onClick:function(){return e.props.history.push("/login")}},"Login to continue")))))}}]),n}(a.Component)),x=n(19),S=(n(44),function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(m.a)(n,[{key:"render",value:function(){var e=this.props.onSubmit;return(r.a.createElement("form",{className:"login-form",name:"login",onSubmit:e},r.a.createElement("input",{name:"username",type:"text"}),r.a.createElement("input",{name:"password",type:"password"}),r.a.createElement("button",{type:"submit"},"Login")))}}]),n}(a.PureComponent)),L=(n(45),function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this,e)).state={message:null},a._onSubmit=a._onSubmit.bind(Object(x.a)(a)),a}return Object(m.a)(n,[{key:"render",value:function(){var e=this.state.message;return(r.a.createElement("div",{className:"login"},r.a.createElement("div",{className:"login-detail"},r.a.createElement("img",{src:C.a,alt:"esper-logo"}),r.a.createElement("h2",null,"Login to your account"),r.a.createElement("div",{className:"login-card"},r.a.createElement(S,{onSubmit:this._onSubmit}),e&&r.a.createElement("p",{className:"error-text"},e)))))}},{key:"_onSubmit",value:function(){var e=Object(v.a)(f.a.mark((function e(t){var n,a,r,c,o,s,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=this.props.dispatch,a=new FormData(t.target),r="".concat(j,"/api/login/"),e.next=6,fetch(r,{body:JSON.stringify({password:a.get("password"),username:a.get("username")}),headers:{"Content-Type":"application/json"},method:"POST"});case 6:return c=e.sent,e.next=9,c.json();case 9:if(!(o=e.sent).errors){e.next=12;break}return e.abrupt("return",this.setState({message:o.message}));case 12:return s=o.user.profile.enterprise,i=o.token,n({data:{enterprise:s,token:i},type:"SET_INITIAL_DATA"}),e.abrupt("return",this.props.history.replace("/dashboard"));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(a.Component)),T=Object(i.b)()(L),D=n(29),U=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var e=arguments.length>1?arguments[1]:void 0;return Object(D.a)({},e.data)},R=(n(46),function(){return r.a.createElement(u.a,null,r.a.createElement(l.d,null,r.a.createElement(l.b,{exact:!0,path:"/",component:N}),r.a.createElement(l.b,{path:"/dashboard",component:_}),r.a.createElement(l.b,{exact:!0,path:"/login",component:T})))}),A=Object(s.b)(U);o.a.render(r.a.createElement(a.StrictMode,null,r.a.createElement(i.a,{store:A},r.a.createElement(R,null))),document.getElementById("root"))}},[[30,1,2]]]);
//# sourceMappingURL=main.2a4f619b.chunk.js.map